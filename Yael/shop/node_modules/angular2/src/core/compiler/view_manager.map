{"version":3,"sources":["view_manager.js"],"names":[],"mappings":"AAAA;AAAA,KAAK,iBAAiB,AAAC,CAAC,MAAK,QAAQ;gBAArC,EAAC,GAAE,YAAqB;AAAE,2BAAwB;IAAE,AAA9B,CAAC;AAAvB,WAAS,CAAT,EAAC,KAAI,CAAO,KAAG,AAAS,CAAC;CAAgC,CAAC;;;;;;;;;;;SAA1D,EAAC,qBAAoB,CAAA,OAAM,AAAC,eAAkB,CACtC,CAAA,sBAAqB,+BAA2B,CAAA,sBAAqB,GAAK,EAAC,OAAM,qBAAmB,CAAC,AAD/D,CACgE;AADtG,WAAO;AAAG,UAAM;EAChB,WAAS,EADjB,EAAC,mDAAoB,CAAA,OAAM,AAAC,oCAAkB,CACtC,CAAA,oDAAqB,6DAA2B,CAAA,oDAAqB,GAAK,EAAC,OAAM,mDAAmB,CAAC,AAD/D,CACgE;SAD9G,EAAC,wCAAoB,CAAA,OAAM,AAAC,4BAAkB,CACtC,CAAA,yCAAqB,kDAA2B,CAAA,yCAAqB,GAAK,EAAC,OAAM,wCAAmB,CAAC,AAD/D,CACgE;AACtG,YAAQ;AAAG,UAAM;AAAG,gBAAY;EAC5B,WAAS,EAHrB,EAAC,WAAoB,CAAA,OAAM,AAAC,UAAkB,CACtC,CAAA,YAAqB,qBAA2B,CAAA,YAAqB,GAAK,EAAC,OAAM,WAAmB,CAAC,AAD/D,CACgE;EAGtG,WAAS,EAJjB,EAAC,qBAAoB,CAAA,OAAM,AAAC,iBAAkB,CACtC,CAAA,sBAAqB,+BAA2B,CAAA,sBAAqB,GAAK,EAAC,OAAM,qBAAmB,CAAC,AAD/D,CACgE;SAD9G,EAAC,kBAAoB,CAAA,OAAM,AAAC,cAAkB,CACtC,CAAA,mBAAqB,4BAA2B,CAAA,mBAAqB,GAAK,EAAC,OAAM,kBAAmB,CAAC,AAD/D,CACgE;AAItG,eAAW;AAAG,UAAM;AAAG,eAAW;AAAG,oBAAgB;EACrD,iBAAe,EANvB,EAAC,+BAAoB,CAAA,OAAM,AAAC,wBAAkB,CACtC,CAAA,gCAAqB,yCAA2B,CAAA,gCAAqB,GAAK,EAAC,OAAM,+BAAmB,CAAC,AAD/D,CACgE;SAD9G,EAAC,uCAAoB,CAAA,OAAM,AAAC,2BAAkB,CACtC,CAAA,wCAAqB,iDAA2B,CAAA,wCAAqB,GAAK,EAAC,OAAM,uCAAmB,CAAC,AAD/D,CACgE;AAMtG,WAAO;AAAG,gBAAY;EACtB,oBAAkB,EAR1B,EAAC,+BAAoB,CAAA,OAAM,AAAC,wBAAkB,CACtC,CAAA,gCAAqB,yCAA2B,CAAA,gCAAqB,GAAK,EAAC,OAAM,+BAAmB,CAAC,AAD/D,CACgE;EAQtG,YAAU,EATlB,EAAC,mBAAoB,CAAA,OAAM,AAAC,eAAkB,CACtC,CAAA,oBAAqB,6BAA2B,CAAA,oBAAqB,GAAK,EAAC,OAAM,mBAAmB,CAAC,AAD/D,CACgE;AAD9G,AAAI,EAAA,iBAiBG,SAAM,eAAa,CAKZ,QAAO,AAAY,CAAG,CAAA,KAAI,AAAoB,CAAG,CAAA,QAAO,AAAS,CAAG;AAC9E,KAAG,UAAU,EAAI,SAAO,CAAC;AACzB,KAAG,UAAU,EAAI,SAAO,CAAC;AACzB,KAAG,OAAO,EAAI,MAAI,CAAC;AACrB,AA1BsC,CAAA;AAAxC,AAAC,eAAc,YAAY,CAAC,AAAC;AA4B3B,iBAAe,CAAf,UAAiB,YAAW,AAAW,CAAW;AAChD,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,YAAW,WAAW,CAAC,CAAC;AACpD,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,YAAW,kBAAkB,CAAC;AACtD,SAAO,IAAI,QAAM,AAAC,CAAC,QAAO,oBAAoB,CAAE,iBAAgB,CAAC,CAAC,CAAC;EACrE;AAEA,iBAAe,CAAf,UAAiB,QAAO,AAAW,CAAoB;AACrD,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,QAAO,WAAW,CAAC,CAAC;AAChD,SAAO,CAAA,QAAO,iBAAiB,CAAE,QAAO,kBAAkB,CAAC,oBAAoB,AAAC,EAAC,CAAC;EACpF;AAEA,aAAW,CAAX,UAAa,YAAW,AAAW,CAAO;AACxC,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,YAAW,WAAW,CAAC,CAAC;AACpD,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,YAAW,kBAAkB,CAAC;AACtD,SAAO,CAAA,IAAG,OAAO,qBAAqB,AAAC,CAAC,QAAO,CAAG,kBAAgB,CAAC,CAAC;EACtE;AAEA,2BAAyB,CAAzB,UAA2B,YAAW,AAAW,CAC7C,CAAA,qBAAoB,AAAa,CAAG,CAAA,gBAAe,AAAQ,CAAG,CAAA,QAAO,AAAS,CAAW;AAC3F,AAAI,MAAA,CAAA,kBAAiB,EAAI,CAAA,iBAAgB,AAAC,CAAC,qBAAoB,CAAC,CAAC;AACjE,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,YAAW,WAAW,CAAC,CAAC;AACpD,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,YAAW,kBAAkB,CAAC;AACtD,AAAI,MAAA,CAAA,MAAK,EAAI,CAAA,QAAO,MAAM,eAAe,CAAE,iBAAgB,CAAC,CAAC;AAC7D,OAAI,CAAC,MAAK,oBAAoB,AAAC,EAAC,CAAG;AACjC,UAAM,IAAI,cAAY,AAAC,EAAC,qDAAqD,EAAC,kBAAgB,EAAG,CAAA;IACnG;AAAA,AACI,MAAA,CAAA,aAAY,EAAI,CAAA,IAAG,kBAAkB,AAAC,CAAC,kBAAiB,CAAC,CAAC;AAC9D,OAAG,UAAU,oBAAoB,AAAC,CAAC,QAAO,OAAO,CAAG,kBAAgB,CAAG,CAAA,aAAY,OAAO,CAAC,CAAC;AAC5F,OAAG,OAAO,oBAAoB,AAAC,CAAC,QAAO,CAAG,kBAAgB,CAAG,cAAY,CAAC,CAAC;AAC3E,OAAG,OAAO,yCAAyC,AAAC,CAAC,QAAO,CAAG,kBAAgB,CAAG,iBAAe,CAAG,SAAO,CAAC,CAAC;AAC7G,OAAG,OAAO,qBAAqB,AAAC,CAAC,QAAO,CAAG,kBAAgB,CAAC,CAAC;AAC7D,OAAG,oBAAoB,AAAC,CAAC,aAAY,CAAC,CAAC;AAEvC,SAAO,IAAI,QAAM,AAAC,CAAC,aAAY,CAAC,CAAC;EACnC;AAEA,mBAAiB,CAAjB,UAAmB,gBAAe,AAAa,CAAG,CAAA,gBAAe,AAAO,CAAG,CAAA,QAAO,AAAS,CAAW;AACpG,AAAI,MAAA,CAAA,aAAY,EAAI,CAAA,iBAAgB,AAAC,CAAC,gBAAe,CAAC,CAAC;AACvD,AAAI,MAAA,CAAA,mBAAkB,EAAI,iBAAe,CAAC;AAC1C,OAAI,OAAM,AAAC,CAAC,mBAAkB,CAAC,CAAG;AAChC,wBAAkB,EAAI,CAAA,aAAY,eAAe,CAAE,CAAA,CAAC,mBAAmB,SAAS,SAAS,CAAC;IAC5F;AAAA,AACI,MAAA,CAAA,UAAS,EAAI,CAAA,IAAG,UAAU,mBAAmB,AAAC,CAAC,aAAY,OAAO,CAAG,oBAAkB,CAAC,CAAC;AAC7F,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,IAAG,OAAO,WAAW,AAAC,CAAC,aAAY,CAAG,WAAS,CAAG,KAAG,CAAG,CAAA,IAAG,UAAU,CAAC,CAAC;AACtF,OAAG,UAAU,mBAAmB,AAAC,CAAC,QAAO,OAAO,CAAG,SAAO,CAAC,CAAC;AAC5D,OAAG,mBAAmB,AAAC,CAAC,QAAO,CAAC,CAAC;AAEjC,OAAG,OAAO,oBAAoB,AAAC,CAAC,QAAO,CAAG,SAAO,CAAC,CAAC;AACnD,OAAG,oBAAoB,AAAC,CAAC,QAAO,CAAC,CAAC;AAClC,SAAO,IAAI,QAAM,AAAC,CAAC,QAAO,CAAC,CAAC;EAC9B;AAEA,oBAAkB,CAAlB,UAAoB,WAAU,AAAQ,CAAG;AAIvC,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,WAAU,CAAC,CAAC;AAExC,OAAG,sBAAsB,AAAC,CAAC,QAAO,CAAG,KAAG,CAAC,CAAC;AAC1C,OAAG,UAAU,YAAY,AAAC,CAAC,QAAO,OAAO,CAAC,CAAC;EAC7C;AAEA,mBAAiB,CAAjB,UAAmB,uBAAsB,AAAW,CAAG,CAAA,gBAAe,AAAa,CAAG,CAAA,QAAO,AAAS,CAAW;AAC/G,AAAI,MAAA,CAAA,aAAY,EAAI,CAAA,iBAAgB,AAAC,CAAC,gBAAe,CAAC,CAAC;AACvD,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,IAAG,kBAAkB,AAAC,CAAC,aAAY,CAAC,CAAC;AACpD,AAAI,MAAA,CAAA,uBAAsB,EAAI,CAAA,YAAW,AAAC,CAAC,uBAAsB,WAAW,CAAC,CAAC;AAC9E,AAAI,MAAA,CAAA,gCAA+B,EAAI,CAAA,uBAAsB,kBAAkB,CAAC;AAChF,OAAG,OAAO,6BAA6B,AAAC,CAAC,uBAAsB,CAAG,iCAA+B,CAAG,SAAO,CAAG,SAAO,CAAC,CAAC;AACvH,OAAG,oBAAoB,AAAC,CAAC,QAAO,CAAC,CAAC;AAClC,SAAO,IAAI,QAAM,AAAC,CAAC,QAAO,CAAC,CAAC;EAC9B;AAEA,oBAAkB,CAAlB,UAAoB,uBAAsB,AAAW,CAAG,CAAA,WAAU,AAAQ,CAAG;AAC3E,AAAI,MAAA,CAAA,QAAO,EAAI,CAAA,YAAW,AAAC,CAAC,WAAU,CAAC,CAAC;AACxC,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,YAAW,AAAC,CAAC,uBAAsB,WAAW,CAAC,oBAAoB,CAAE,uBAAsB,kBAAkB,CAAC,CAAC;AAChI,OAAG,qBAAqB,AAAC,CAAC,UAAS,CAAG,SAAO,CAAC,CAAC;EACjD;AAEA,sBAAoB,CAApB,UAAsB,qBAAoB,AAAW,CACjD,CAAA,OAAM,AAAO,CAAG,CAAA,YAAW,AAAkE,CAAW;MAA7D,QAAM,6CAAe,KAAG;MAAG,SAAO,6CAAa,KAAG;AAC/F,AAAI,MAAA,CAAA,SAAQ,EAAI,CAAA,iBAAgB,AAAC,CAAC,YAAW,CAAC,CAAC;AAC/C,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,YAAW,AAAC,CAAC,qBAAoB,WAAW,CAAC,CAAC;AAC/D,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,qBAAoB,kBAAkB,CAAC;AAC/D,AAAI,MAAA,CAAA,WAAU,EAAI,KAAG,CAAC;AACtB,AAAI,MAAA,CAAA,wBAAuB,EAAI,KAAG,CAAC;AACnC,OAAI,SAAQ,AAAC,CAAC,OAAM,CAAC,CAAG;AACtB,gBAAU,EAAI,CAAA,YAAW,AAAC,CAAC,OAAM,WAAW,CAAC,CAAC;AAC9C,6BAAuB,EAAI,CAAA,OAAM,kBAAkB,CAAC;IACtD;AAAA,AAEI,MAAA,CAAA,IAAG,EAAI,CAAA,IAAG,kBAAkB,AAAC,CAAC,SAAQ,CAAC,CAAC;AAE5C,OAAG,UAAU,sBAAsB,AAAC,CAAC,UAAS,OAAO,CAAG,kBAAgB,CAAG,QAAM,CAAG,CAAA,IAAG,OAAO,CAAC,CAAC;AAChG,OAAG,OAAO,sBAAsB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,YAAU,CAAG,yBAAuB,CAAG,QAAM,CAAG,KAAG,CAAC,CAAC;AACtH,OAAG,OAAO,uBAAuB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,YAAU,CAAG,yBAAuB,CAAG,QAAM,CAAG,SAAO,CAAC,CAAC;AAC3H,OAAG,oBAAoB,AAAC,CAAC,IAAG,CAAC,CAAC;AAC9B,SAAO,IAAI,QAAM,AAAC,CAAC,IAAG,CAAC,CAAC;EAC1B;AAEA,uBAAqB,CAArB,UAAuB,qBAAoB,AAAW,CAAG,CAAA,OAAM,AAAO,CAAG;AACvE,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,YAAW,AAAC,CAAC,qBAAoB,WAAW,CAAC,CAAC;AAC/D,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,qBAAoB,kBAAkB,CAAC;AAC/D,OAAG,wBAAwB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,QAAM,CAAC,CAAC;EACtE;AAEA,sBAAoB,CAApB,UAAsB,qBAAoB,AAAW,CAAG,CAAA,OAAM,AAAO,CAAG,CAAA,OAAM,AAAQ,CAAW;AAC/F,AAAI,MAAA,CAAA,IAAG,EAAI,CAAA,YAAW,AAAC,CAAC,OAAM,CAAC,CAAC;AAChC,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,YAAW,AAAC,CAAC,qBAAoB,WAAW,CAAC,CAAC;AAC/D,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,qBAAoB,kBAAkB,CAAC;AAO/D,OAAG,OAAO,sBAAsB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,KAAG,CAAG,KAAG,CAAG,QAAM,CAAG,KAAG,CAAC,CAAC;AAC3F,OAAG,UAAU,sBAAsB,AAAC,CAAC,UAAS,OAAO,CAAG,kBAAgB,CAAG,QAAM,CAAG,CAAA,IAAG,OAAO,CAAC,CAAC;AAChG,SAAO,QAAM,CAAC;EAChB;AAEA,sBAAoB,CAApB,UAAsB,qBAAoB,AAAW,CAAG,CAAA,OAAM,AAAO,CAAW;AAC9E,AAAI,MAAA,CAAA,UAAS,EAAI,CAAA,YAAW,AAAC,CAAC,qBAAoB,WAAW,CAAC,CAAC;AAC/D,AAAI,MAAA,CAAA,iBAAgB,EAAI,CAAA,qBAAoB,kBAAkB,CAAC;AAC/D,AAAI,MAAA,CAAA,aAAY,EAAI,CAAA,UAAS,eAAe,CAAE,iBAAgB,CAAC,CAAC;AAChE,AAAI,MAAA,CAAA,IAAG,EAAI,CAAA,aAAY,MAAM,CAAE,OAAM,CAAC,CAAC;AACvC,OAAG,OAAO,sBAAsB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,QAAM,CAAC,CAAC;AACzE,OAAG,UAAU,sBAAsB,AAAC,CAAC,UAAS,OAAO,CAAG,kBAAgB,CAAG,QAAM,CAAG,CAAA,IAAG,OAAO,CAAC,CAAC;AAChG,SAAO,IAAI,QAAM,AAAC,CAAC,IAAG,CAAC,CAAC;EAC1B;AAEA,kBAAgB,CAAhB,UAAkB,SAAQ,AAAwB,CAAsB;AACtE,AAAI,MAAA,CAAA,IAAG,EAAI,CAAA,IAAG,UAAU,QAAQ,AAAC,CAAC,SAAQ,CAAC,CAAC;AAC5C,OAAI,OAAM,AAAC,CAAC,IAAG,CAAC,CAAG;AACjB,SAAG,EAAI,CAAA,IAAG,OAAO,WAAW,AAAC,CAAC,SAAQ,CAAG,CAAA,IAAG,UAAU,WAAW,AAAC,CAAC,SAAQ,OAAO,CAAC,CAAG,KAAG,CAAG,CAAA,IAAG,UAAU,CAAC,CAAC;AAC3G,SAAG,UAAU,mBAAmB,AAAC,CAAC,IAAG,OAAO,CAAG,KAAG,CAAC,CAAC;AACpD,SAAG,mBAAmB,AAAC,CAAC,IAAG,CAAC,CAAC;IAC/B;AAAA,AACA,SAAO,KAAG,CAAC;EACb;AAEA,mBAAiB,CAAjB,UAAmB,IAAG,AAAmB,CAAG;AAC1C,AAAI,MAAA,CAAA,OAAM,EAAI,CAAA,IAAG,MAAM,eAAe,CAAC;AACvC,QAAS,GAAA,CAAA,SAAQ,EAAI,EAAA,CAAG,CAAA,SAAQ,EAAI,CAAA,OAAM,OAAO,CAAG,CAAA,SAAQ,EAAE,CAAG;AAC/D,AAAI,QAAA,CAAA,MAAK,EAAI,CAAA,OAAM,CAAE,SAAQ,CAAC,CAAC;AAC/B,SAAI,MAAK,mBAAmB,AAAC,EAAC,CAAG;AAC/B,AAAI,UAAA,CAAA,SAAQ,EAAI,CAAA,IAAG,kBAAkB,AAAC,CAAC,MAAK,gBAAgB,CAAC,CAAC;AAC9D,WAAG,UAAU,oBAAoB,AAAC,CAAC,IAAG,OAAO,CAAG,UAAQ,CAAG,CAAA,SAAQ,OAAO,CAAC,CAAC;AAC5E,WAAG,OAAO,oBAAoB,AAAC,CAAC,IAAG,CAAG,UAAQ,CAAG,UAAQ,CAAC,CAAC;MAC7D;AAAA,IACF;AAAA,EACF;AAEA,mBAAiB,CAAjB,UAAmB,IAAG,AAAmB,CAAG;AAE1C,OAAG,UAAU,WAAW,AAAC,CAAC,IAAG,CAAC,CAAC;EACjC;AAEA,wBAAsB,CAAtB,UAAwB,UAAS,CAAG,CAAA,iBAAgB,CAAG,CAAA,OAAM,AAAO,CAAG;AACrE,AAAI,MAAA,CAAA,aAAY,EAAI,CAAA,UAAS,eAAe,CAAE,iBAAgB,CAAC,CAAC;AAChE,AAAI,MAAA,CAAA,IAAG,EAAI,CAAA,aAAY,MAAM,CAAE,OAAM,CAAC,CAAC;AACvC,OAAG,sBAAsB,AAAC,CAAC,IAAG,CAAG,MAAI,CAAC,CAAC;AACvC,OAAG,OAAO,sBAAsB,AAAC,CAAC,UAAS,CAAG,kBAAgB,CAAG,QAAM,CAAC,CAAC;AACzE,OAAG,UAAU,sBAAsB,AAAC,CAAC,UAAS,OAAO,CAAG,kBAAgB,CAAG,QAAM,CAAG,CAAA,IAAG,OAAO,CAAC,CAAC;AAChG,OAAG,mBAAmB,AAAC,CAAC,IAAG,CAAC,CAAC;EAC/B;AAEA,sBAAoB,CAApB,UAAsB,QAAO,CAAG,CAAA,iBAAgB,CAAG,CAAA,aAAY,CAAG;AAChE,OAAG,sBAAsB,AAAC,CAAC,aAAY,CAAG,MAAI,CAAC,CAAC;AAChD,OAAG,UAAU,oBAAoB,AAAC,CAAC,QAAO,OAAO,CAAG,kBAAgB,CAAG,CAAA,aAAY,OAAO,CAAC,CAAC;AAC5F,OAAG,OAAO,oBAAoB,AAAC,CAAC,QAAO,CAAG,kBAAgB,CAAC,CAAC;AAC5D,OAAG,mBAAmB,AAAC,CAAC,aAAY,CAAC,CAAC;EACxC;AAEA,qBAAmB,CAAnB,UAAqB,UAAS,CAAG,CAAA,QAAO,CAAG;AACzC,OAAG,sBAAsB,AAAC,CAAC,QAAO,CAAG,KAAG,CAAC,CAAC;AAC1C,OAAG,UAAU,mBAAmB,AAAC,CAAC,UAAS,OAAO,CAAG,CAAA,QAAO,OAAO,CAAC,CAAC;AACrE,OAAG,OAAO,mBAAmB,AAAC,CAAC,UAAS,CAAG,SAAO,CAAC,CAAC;AACpD,OAAG,mBAAmB,AAAC,CAAC,QAAO,CAAC,CAAC;EACnC;AAEA,oBAAkB,CAAlB,UACI,IAAG,AAAmB,CAAG;AAC3B,OAAG,UAAU,YAAY,AAAC,CAAC,IAAG,OAAO,CAAC,CAAC;AAEvC,AAAI,MAAA,CAAA,OAAM,EAAI,CAAA,IAAG,MAAM,eAAe,CAAC;AACvC,QAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,OAAM,OAAO,CAAG,GAAE,CAAA,CAAG;AACvC,SAAI,OAAM,CAAE,CAAA,CAAC,mBAAmB,AAAC,EAAC,CAAG;AACnC,WAAG,OAAO,qBAAqB,AAAC,CAAC,IAAG,CAAG,EAAA,CAAC,CAAC;AACzC,WAAG,oBAAoB,AAAC,CACtB,IAAG,oBAAoB,CAAE,CAAA,CAAC,CAC5B,CAAC;MACH;AAAA,IACF;AAAA,EACF;AAEA,sBAAoB,CAApB,UAAsB,IAAG,AAAmB,CAAG,CAAA,sBAAqB,CAAG;AACrE,OAAG,OAAO,cAAc,AAAC,CAAC,IAAG,CAAC,CAAC;AAC/B,OAAG,UAAU,cAAc,AAAC,CAAC,IAAG,OAAO,CAAC,CAAC;AACzC,AAAI,MAAA,CAAA,OAAM,EAAI,CAAA,IAAG,MAAM,eAAe,CAAC;AACvC,QAAS,GAAA,CAAA,CAAA,EAAI,EAAA,CAAG,CAAA,CAAA,EAAI,CAAA,OAAM,OAAO,CAAG,CAAA,CAAA,EAAE,CAAG;AACvC,AAAI,QAAA,CAAA,aAAY,EAAI,CAAA,IAAG,oBAAoB,CAAE,CAAA,CAAC,CAAC;AAC/C,SAAI,SAAQ,AAAC,CAAC,aAAY,CAAC,CAAG;AAC5B,WAAI,OAAM,CAAE,CAAA,CAAC,oBAAoB,AAAC,EAAC,CAAA,EAAK,uBAAqB,CAAG;AAC9D,aAAG,sBAAsB,AAAC,CAAC,IAAG,CAAG,EAAA,CAAG,cAAY,CAAC,CAAC;QACpD,KAAO;AACL,aAAG,sBAAsB,AAAC,CAAC,aAAY,CAAG,MAAI,CAAC,CAAC;QAClD;AAAA,MACF;AAAA,AACI,QAAA,CAAA,EAAC,EAAI,CAAA,IAAG,eAAe,CAAE,CAAA,CAAC,CAAC;AAC/B,SAAI,SAAQ,AAAC,CAAC,EAAC,CAAC,CAAG;AACjB,YAAS,GAAA,CAAA,CAAA,EAAI,CAAA,EAAC,MAAM,OAAO,EAAI,EAAA,CAAG,CAAA,CAAA,GAAK,EAAA,CAAG,CAAA,CAAA,EAAE,CAAG;AAC7C,aAAG,wBAAwB,AAAC,CAAC,IAAG,CAAG,EAAA,CAAG,EAAA,CAAC,CAAC;QAC1C;AAAA,MACF;AAAA,IACF;AAAA,AAGA,QAAS,GAAA,CAAA,CAAA,EAAI,CAAA,IAAG,cAAc,OAAO,EAAE,EAAA,CAAG,CAAA,CAAA,GAAG,EAAA,CAAG,CAAA,CAAA,EAAE,CAAG;AACnD,AAAI,QAAA,CAAA,QAAO,EAAI,CAAA,IAAG,cAAc,CAAE,CAAA,CAAC,CAAC;AACpC,SAAG,qBAAqB,AAAC,CAAC,IAAG,CAAG,SAAO,CAAC,CAAC;IAC3C;AAAA,EACF;AAAA,KAzPmF;AAArF,KAAK,eAAe,AAAC,+BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,cAezB,WAAS,AAAC,EAAC,EAfqC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,8BACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAqBH,WAAU,IAAS,mBAAkB,IAAY,QAAO,GArB9B;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,yDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA2BM,UAAS,GA3BQ;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,yDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAiCE,UAAS,GAjCY;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,qDACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAsCE,UAAS,GAtCY;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,mEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA4CgB,UAAS,IACvB,YAAW,IAAoB,OAAM,IAAY,QAAO,GA7CnC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA+DY,YAAW,IAhEjD,eAAc,KAAO,WAgEiE,QAAO,GA/D5C;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,4DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA+EQ,OAAM,GA/ES;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAyFmB,UAAS,IAAoB,YAAW,IAAY,QAAO,GAzFvD;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,4DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAmGoB,UAAS,IAAe,OAAM,GAnG3B;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAyGoB,UAAS,IA1GvD,eAAc,KAAO,WA2Gc,YAAW,IAAW,UAAS,IAAmB,QAAO,GA1G3C;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,+DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA8HqB,UAAS,IA/HxD,eAAc,KAAO,UAC4B;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAoIoB,UAAS,IArIvD,eAAc,KAAO,WAqI6D,OAAM,GApIvC;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAmJoB,UAAS,IApJvD,eAAc,KAAO,UAC4B;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,0DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA6JI,UAAS,aAAa,GA7JH;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAuKA,UAAS,QAAQ,GAvKM;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,2DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAmLA,UAAS,QAAQ,GAnLM;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,gEACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,oBAD1B,eAAc,KAAO,UAC4B;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,4DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YAgNf,UAAS,QAAQ,GAhNqB;EAAC,CAAC,CAAC,CAAC;AADrD,KAAK,eAAe,AAAC,8DACb,EAAC,GAAE,CAAG,UAAS,AAAD,CAAG;AAAC,YA8NG,UAAS,QAAQ,OA9NG;EAAC,CAAC,CAAC,CAAC;AA0PrD","file":"angular2/src/core/compiler/view_manager.js","sourcesContent":["import {Injector, Binding} from 'angular2/di';\nimport {Injectable} from 'angular2/src/di/annotations_impl';\nimport {isPresent, isBlank, BaseException} from 'angular2/src/facade/lang';\nimport * as viewModule from './view';\nimport {ElementRef} from './element_ref';\nimport {ProtoViewRef, ViewRef, internalView, internalProtoView} from './view_ref';\nimport {ViewContainerRef} from './view_container_ref';\nimport {Renderer, RenderViewRef} from 'angular2/src/render/api';\nimport {AppViewManagerUtils} from './view_manager_utils';\nimport {AppViewPool} from './view_pool';\n\n/**\n * Entry point for creating, moving views in the view hierarchy and destroying views.\n * This manager contains all recursion and delegates to helper methods\n * in AppViewManagerUtils and the Renderer, so unit tests get simpler.\n */\n@Injectable()\nexport class AppViewManager {\n  _viewPool:AppViewPool;\n  _utils:AppViewManagerUtils;\n  _renderer:Renderer;\n\n  constructor(viewPool:AppViewPool, utils:AppViewManagerUtils, renderer:Renderer) {\n    this._renderer = renderer;\n    this._viewPool = viewPool;\n    this._utils = utils;\n  }\n\n  getComponentView(hostLocation:ElementRef):ViewRef {\n    var hostView = internalView(hostLocation.parentView);\n    var boundElementIndex = hostLocation.boundElementIndex;\n    return new ViewRef(hostView.componentChildViews[boundElementIndex]);\n  }\n\n  getViewContainer(location:ElementRef):ViewContainerRef {\n    var hostView = internalView(location.parentView);\n    return hostView.elementInjectors[location.boundElementIndex].getViewContainerRef();\n  }\n\n  getComponent(hostLocation:ElementRef):any {\n    var hostView = internalView(hostLocation.parentView);\n    var boundElementIndex = hostLocation.boundElementIndex;\n    return this._utils.getComponentInstance(hostView, boundElementIndex);\n  }\n\n  createDynamicComponentView(hostLocation:ElementRef,\n      componentProtoViewRef:ProtoViewRef, componentBinding:Binding, injector:Injector):ViewRef {\n    var componentProtoView = internalProtoView(componentProtoViewRef);\n    var hostView = internalView(hostLocation.parentView);\n    var boundElementIndex = hostLocation.boundElementIndex;\n    var binder = hostView.proto.elementBinders[boundElementIndex];\n    if (!binder.hasDynamicComponent()) {\n      throw new BaseException(`There is no dynamic component directive at element ${boundElementIndex}`)\n    }\n    var componentView = this._createPooledView(componentProtoView);\n    this._renderer.attachComponentView(hostView.render, boundElementIndex, componentView.render);\n    this._utils.attachComponentView(hostView, boundElementIndex, componentView);\n    this._utils.hydrateDynamicComponentInElementInjector(hostView, boundElementIndex, componentBinding, injector);\n    this._utils.hydrateComponentView(hostView, boundElementIndex);\n    this._viewHydrateRecurse(componentView);\n\n    return new ViewRef(componentView);\n  }\n\n  createRootHostView(hostProtoViewRef:ProtoViewRef, overrideSelector:string, injector:Injector):ViewRef {\n    var hostProtoView = internalProtoView(hostProtoViewRef);\n    var hostElementSelector = overrideSelector;\n    if (isBlank(hostElementSelector)) {\n      hostElementSelector = hostProtoView.elementBinders[0].componentDirective.metadata.selector;\n    }\n    var renderView = this._renderer.createRootHostView(hostProtoView.render, hostElementSelector);\n    var hostView = this._utils.createView(hostProtoView, renderView, this, this._renderer);\n    this._renderer.setEventDispatcher(hostView.render, hostView);\n    this._createViewRecurse(hostView);\n\n    this._utils.hydrateRootHostView(hostView, injector);\n    this._viewHydrateRecurse(hostView);\n    return new ViewRef(hostView);\n  }\n\n  destroyRootHostView(hostViewRef:ViewRef) {\n    // Note: Don't detach the hostView as we want to leave the\n    // root element in place. Also don't put the hostView into the view pool\n    // as it is depending on the element for which it was created.\n    var hostView = internalView(hostViewRef);\n    // We do want to destroy the component view though.\n    this._viewDehydrateRecurse(hostView, true);\n    this._renderer.destroyView(hostView.render);\n  }\n\n  createFreeHostView(parentComponentLocation:ElementRef, hostProtoViewRef:ProtoViewRef, injector:Injector):ViewRef {\n    var hostProtoView = internalProtoView(hostProtoViewRef);\n    var hostView = this._createPooledView(hostProtoView);\n    var parentComponentHostView = internalView(parentComponentLocation.parentView);\n    var parentComponentBoundElementIndex = parentComponentLocation.boundElementIndex;\n    this._utils.attachAndHydrateFreeHostView(parentComponentHostView, parentComponentBoundElementIndex, hostView, injector);\n    this._viewHydrateRecurse(hostView);\n    return new ViewRef(hostView);\n  }\n\n  destroyFreeHostView(parentComponentLocation:ElementRef, hostViewRef:ViewRef) {\n    var hostView = internalView(hostViewRef);\n    var parentView = internalView(parentComponentLocation.parentView).componentChildViews[parentComponentLocation.boundElementIndex];\n    this._destroyFreeHostView(parentView, hostView);\n  }\n\n  createViewInContainer(viewContainerLocation:ElementRef,\n      atIndex:number, protoViewRef:ProtoViewRef, context:ElementRef = null, injector:Injector = null):ViewRef {\n    var protoView = internalProtoView(protoViewRef);\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    var contextView = null;\n    var contextBoundElementIndex = null;\n    if (isPresent(context)) {\n      contextView = internalView(context.parentView);\n      contextBoundElementIndex = context.boundElementIndex;\n    }\n\n    var view = this._createPooledView(protoView);\n\n    this._renderer.attachViewInContainer(parentView.render, boundElementIndex, atIndex, view.render);\n    this._utils.attachViewInContainer(parentView, boundElementIndex, contextView, contextBoundElementIndex, atIndex, view);\n    this._utils.hydrateViewInContainer(parentView, boundElementIndex, contextView, contextBoundElementIndex, atIndex, injector);\n    this._viewHydrateRecurse(view);\n    return new ViewRef(view);\n  }\n\n  destroyViewInContainer(viewContainerLocation:ElementRef, atIndex:number) {\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    this._destroyViewInContainer(parentView, boundElementIndex, atIndex);\n  }\n\n  attachViewInContainer(viewContainerLocation:ElementRef, atIndex:number, viewRef:ViewRef):ViewRef {\n    var view = internalView(viewRef);\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    // TODO(tbosch): the public methods attachViewInContainer/detachViewInContainer\n    // are used for moving elements without the same container.\n    // We will change this into an atomic `move` operation, which should preserve the\n    // previous parent injector (see https://github.com/angular/angular/issues/1377).\n    // Right now we are destroying any special\n    // context view that might have been used.\n    this._utils.attachViewInContainer(parentView, boundElementIndex, null, null, atIndex, view);\n    this._renderer.attachViewInContainer(parentView.render, boundElementIndex, atIndex, view.render);\n    return viewRef;\n  }\n\n  detachViewInContainer(viewContainerLocation:ElementRef, atIndex:number):ViewRef {\n    var parentView = internalView(viewContainerLocation.parentView);\n    var boundElementIndex = viewContainerLocation.boundElementIndex;\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.detachViewInContainer(parentView.render, boundElementIndex, atIndex, view.render);\n    return new ViewRef(view);\n  }\n\n  _createPooledView(protoView:viewModule.AppProtoView):viewModule.AppView {\n    var view = this._viewPool.getView(protoView);\n    if (isBlank(view)) {\n      view = this._utils.createView(protoView, this._renderer.createView(protoView.render), this, this._renderer);\n      this._renderer.setEventDispatcher(view.render, view);\n      this._createViewRecurse(view);\n    }\n    return view;\n  }\n\n  _createViewRecurse(view:viewModule.AppView) {\n    var binders = view.proto.elementBinders;\n    for (var binderIdx = 0; binderIdx < binders.length; binderIdx++) {\n      var binder = binders[binderIdx];\n      if (binder.hasStaticComponent()) {\n        var childView = this._createPooledView(binder.nestedProtoView);\n        this._renderer.attachComponentView(view.render, binderIdx, childView.render);\n        this._utils.attachComponentView(view, binderIdx, childView);\n      }\n    }\n  }\n\n  _destroyPooledView(view:viewModule.AppView) {\n    // TODO: if the pool is full, call renderer.destroyView as well!\n    this._viewPool.returnView(view);\n  }\n\n  _destroyViewInContainer(parentView, boundElementIndex, atIndex:number) {\n    var viewContainer = parentView.viewContainers[boundElementIndex];\n    var view = viewContainer.views[atIndex];\n    this._viewDehydrateRecurse(view, false);\n    this._utils.detachViewInContainer(parentView, boundElementIndex, atIndex);\n    this._renderer.detachViewInContainer(parentView.render, boundElementIndex, atIndex, view.render);\n    this._destroyPooledView(view);\n  }\n\n  _destroyComponentView(hostView, boundElementIndex, componentView) {\n    this._viewDehydrateRecurse(componentView, false);\n    this._renderer.detachComponentView(hostView.render, boundElementIndex, componentView.render);\n    this._utils.detachComponentView(hostView, boundElementIndex);\n    this._destroyPooledView(componentView);\n  }\n\n  _destroyFreeHostView(parentView, hostView) {\n    this._viewDehydrateRecurse(hostView, true);\n    this._renderer.detachFreeHostView(parentView.render, hostView.render);\n    this._utils.detachFreeHostView(parentView, hostView);\n    this._destroyPooledView(hostView);\n  }\n\n  _viewHydrateRecurse(\n      view:viewModule.AppView) {\n    this._renderer.hydrateView(view.render);\n\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; ++i) {\n      if (binders[i].hasStaticComponent()) {\n        this._utils.hydrateComponentView(view, i);\n        this._viewHydrateRecurse(\n          view.componentChildViews[i]\n        );\n      }\n    }\n  }\n\n  _viewDehydrateRecurse(view:viewModule.AppView, forceDestroyComponents) {\n    this._utils.dehydrateView(view);\n    this._renderer.dehydrateView(view.render);\n    var binders = view.proto.elementBinders;\n    for (var i = 0; i < binders.length; i++) {\n      var componentView = view.componentChildViews[i];\n      if (isPresent(componentView)) {\n        if (binders[i].hasDynamicComponent() || forceDestroyComponents) {\n          this._destroyComponentView(view, i, componentView);\n        } else {\n          this._viewDehydrateRecurse(componentView, false);\n        }\n      }\n      var vc = view.viewContainers[i];\n      if (isPresent(vc)) {\n        for (var j = vc.views.length - 1; j >= 0; j--) {\n          this._destroyViewInContainer(view, i, j);\n        }\n      }\n    }\n\n    // freeHostViews\n    for (var i = view.freeHostViews.length-1; i>=0; i--) {\n      var hostView = view.freeHostViews[i];\n      this._destroyFreeHostView(view, hostView);\n    }\n  }\n}\n"]}